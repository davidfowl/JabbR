@using JabbR;
@{
    Layout = "_layout.cshtml";
}
<div class="user-registration">
    <form class="form-horizontal" action="@Url.Content("~/account/create")" method="post">
        @Html.ValidationSummary()
        <div class="control-group">
            <div class="controls">
                <div class="input-prepend">
                    <span class="add-on"><i class="icon-user"></i></span>
                    @Html.TextBox("username", "input-block-level", "Username")
                </div>
            </div>
        </div>
        <div class="control-group">
            <div class="controls">
                <div class="input-prepend">
                    <span class="add-on"><i class="icon-envelope"></i></span>
                    @Html.TextBox("email", "input-block-level", "Email")
                </div>
            </div>
        </div>
        @if (ViewBag.requirePassword) 
        {
        <div class="control-group">
            <div class="controls">
                <div class="input-prepend">
                    <span class="add-on"><i class="icon-lock"></i></span>
                    @Html.Password("password", "input-block-level", "Password")
                </div>
            </div>
        </div>
        <div class="control-group">
            <div class="controls">
                <div class="input-prepend">
                    <span class="add-on"><i class="icon-lock"></i></span>
                    @Html.Password("confirmPassword", "input-block-level", "Confirm Password")
                </div>
            </div>
        </div>
        }
        @if (!String.IsNullOrEmpty(ViewBag.reCaptchaPublicKey))
        {
        <div class="control-group">
            <div class="controls">
                <script type="text/javascript" src="http://www.google.com/recaptcha/api/challenge?k=@ViewBag.reCaptchaPublicKey">
                </script>
                <noscript>
                    <iframe src="http://www.google.com/recaptcha/api/noscript?k=@ViewBag.reCaptchaPublicKey" height="300" width="500" frameborder="0">
                    </iframe>
                    <br />
                    <span class="add-on"></span>
                    <textarea name="recaptcha_challenge_field" rows="3" cols="40">
                    </textarea>
                    <input type="hidden" name="recaptcha_response_field" value="manual_challenge">
                </noscript>
            </div>
        </div>
        }
        <div class="control-group">
            <div class="controls">
                <button type="submit" class="btn">Register</button>
                <a href="@Url.Content("~/")" class="btn">Cancel</a>
            </div>
        </div>
        @Html.AntiForgeryToken()
    </form>
</div>
